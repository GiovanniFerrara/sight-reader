{"version":3,"sources":["src/SmartArray.js","src/constants.js","src/Audio.js","src/Piano.js","src/RefManager.js","src/start.js","src/index.js"],"names":["SmartArray","dataArray","item","push","length","reduce","result","time","midPoint","Math","floor","counts","mode","max","forEach","value","round","KEYS","pos","hz","name","Audio","elementsRefs","pitchSamples","canvas2Context","fillStyle","font","i","fillRect","fillText","toString","audioReady","loudEnough","MIN_VOLUME","ref","document","location","pathname","replace","audioContext","window","AudioContext","audioEl","querySelector","analyser","createAnalyser","sampleRate","fftSize","minDecibels","maxDecibels","bufferLength","frequencyBinCount","Uint8Array","canvasContext","canvas","getContext","userMediaConstraints","audio","getUserMediaSuccess","stream","audioSource","createMediaStreamSource","mic_audio","src","connect","getUserMediaError","err","console","error","navigator","getUserMedia","lastItem","STEPS_THRESHOLD","getKey","pitch","closestLower","closestHigher","distanceToLower","abs","distanceToHigher","min","renderKey","key","keyEls","querySelectorAll","keyEl","style","fill","classList","remove","pressedKeyEl","add","empty","drawWave","getByteTimeDomainData","lastPos","elapsedSteps","hertz","drawFreq","getByteFrequencyData","volumeTotal","volume","nowLoudEnough","db","textContent","renderAudio","requestAnimationFrame","clearRect","setInterval","addEventListener","e","keyCode","paused","play","pause","COLORS","EBONY","IVORY","SHIFTS","LEFT","MIDDLE","RIGHT","getKeyDeets","keyPos","shift","color","Piano","refs","pianoEl","piano","ns","left","blackKeyGroup","createElementNS","whiteKeyGroup","keyRect","keyDeets","x","height","width","warn","keyText","setAttribute","appendChild","RefManager","Object","keys","refEls","refEl","getAttribute","start","render","refManager","getRefs","log"],"mappings":";;AMAA;;;;ALCO,AKCP,ILDaiB,IAAI,GAAG,CAClB;ACFF,ACAA,AFEIC,AIFJ,EJEIA,GAAG,EAAE,CAAP;AAAUC,EAAAA,EAAE,EAAE,IAAd;ACDF,ADCsBC,AIDtB,EJCsBA,IAAI,EAAE;AAA1B,CADkB,EAElB;AAAEF,AIDJ,EJCIA,GAAG,EAAE,CAAP;AAAUC,EAAAA,EAAE,EAAE,OAAd;AAAuBC,EAAAA,EDHnBpB,ECGuB,EAAE;ADF7B,ACEA,CAFkB,EAGlB,qBDHe;AGCjB,AHDiB,ACGbkB,EAAAA,EEFEiG,CFEC,EAAE,CAAP,EEFU,GAAG;AACbC,AFCUjG,EEDViG,AFCUjG,EAAE,EAAE,CEDT,EAAE,IFCP,GEFa;AAEbkG,AHFE,ACEqBjG,EEAvBiG,AFAuBjG,IAAI,CEAtB,CFAwB,CEAtB,AHFAnB,SAAL,GAAiB,EAAjB;AGAW,AHCZ,ACCD,CEFF,AFDoB,EAIlB;AECF,AFDIiB,EAAAA,EECEoG,ACNA0B,CHKC,EAAE,CAAP,EECU,GAAG;AACbzB,ACNA,AHIUpG,EEEVoG,AFFUpG,EAAE,EEER,AFFU,EEER,KFFN,CECa,QCLA4G,IAAb,EAAmB;ADOnBP,ACPmB,AHIIpG,AIDzB,EFIEoG,AFHuBpG,EIDnBkI,EJCuB,EEGrB,AFHuB,CIDpB,CFID,EEJI,MFEC,GEFTA,KAAQ,GAAM;AFKlB7B,AFJA,AIAA,CJJkB,CEQlBA,CFHA,IEGK,EAAE,gBHJDvH,MAAM;AGCC,ACJX,AJIA,ACAAgB,AIAF,CFAF,CFAIA,GAAG,CIACiI,CJAC,CAAP,CGJOpB,EJIA9H,CKAK,CDJV,ECIakC,CDJD8G,IJIZ,CAAe9I,CIJG,CAAC+I,ACIE,CAAC9D,CLAtB,CAAoBlF,CIJR,CAAY6H,EJIxB,EIJY,EAAkB3H,MAAlB,ACIC,CAA0B,EDJA2H,IAA3B,GAAkC,EAA9C,CCIa,CAAf;ADHC,AJIA,ACDS5G,AICV,EJDUA,EAAE,EAAE,AICR4G,IAAI,GJDV,AICa,EAAb;AFKF,AFNyB3G,EAAAA,ECHnBC,EDGuB,EAAE,CEMtBqG,WAAT,CAAsBC,MAAtB,EAA8B;ADR5B,ACSA,AFPA,AIFkB,CJHA,EAMlB,GEMMzC,GAAG,GAAGyC,KDTCrG,CCSK,GAAG,EAArB,MDTA,EAA2B,cGKP6H,MALF;AHAS,ACU3B,AFPEjI,AIHgB,EJGhBA,GAAG,CEOD0G,CFPG,CAAP,GEOA,iBH4BS;AG3BT,AH4BE,ACpCQzG,EAAAA,EAAE,EEQR0G,AFRU,KEQd,AH4BO5H,ECpCP,ODoCE,CAAeG,MAAf,GItCS,AJsCe,CAAxB;AEtCA,AECA,AJsCD,ACrCsBgB,AIHL,EJGKA,IAAI,EAAE,CCFtBG,CECC4H,MAAM,GAAGhH,EFDf,GAAoB,GECG,CFDCnC,AECAoF,gBAAT,CAA0B,EFDrB,EAApB,QECe,CAAf;AFAA,ACWF,AFVA,AIEA,CJRkB,EAOlB,GESIF,GDXG5D,ACWA,KAAK,CAAR,IAAa4D,EDXf,CCWkB,EDXE5D,GCWG,CAAzB,EAA4B,MDX1B,oBGG0B;AHF3B,ACWCsG,ACbS,AHGT1G,AIC0B,EJD1BA,EEUA0G,CFVG,EAAE,CAAP,CEUO,CETIwB,EFSD9B,GETkB,GFSZ,CAACG,KAAf,yBCXoB0B,MAFX;ADcTtB,ACdS,AHGD1G,AIER,EJFQA,EEWR0G,AFXU,EAAE,GEWP,CETC3F,EFSEiF,CFXV,AIEW,GAAGiC,EFSE,CAAChC,EETE,CAACiC,EFSlB,AHVS,UKCG,CAAmB,UAAnB,CAAZ;AFUD,AHVC,ACFqBjI,AIGrB2G,EJHqB3G,CESvB,GFT2B,AIGzB2G,EJH2B,CEYtB,CETD,CAAC7F,EFSIgD,AHVF,CKCH,CAAJ,CFSY,EHVAjF,AKCAmJ,GFSK,CAAR,CETT,GFSsBlE,CHVf,CAAe7E,CGUG,KAAK,AHVvB,CAAsB,CGUxB,EAA6B,OHVJC,MAAD,EAASC,IAAT,EAAkB;AGW/CqH,AChBS,AJMP,ACHJ,AIIC,CJXiB,EAQlB,CEYEA,KAAK,GAAGN,GHVChH,GGUK,CAACiH,EHVA,EGUf,CHVkBhH,IAAhB;AGWFsH,ACfA,AJKC,ACHD3G,AILgB,EJKhBA,EEaA2G,CFbG,EDCI,ACDF,CAAP,CEaO,AHVF,CAFI,EGYCV,EHVA,IGUM,CAACC,AHVFnH,KGUb,IHVQ,CAAeG,MAFvB,EEDgBoB,gBAAgB,OEFJ;AFG5BA,ACaD,AChB6B,AJM7B,ACJSL,AILQ,EJKRA,CEWH,CFXK,ECCVK,ADDY,GEcP,IAAI0D,AFdX,CGFakE,EDgBC,GChBgB,CFGd,CAAC3H,ACaE,CAAZ,EAAe,MDbpB,GAA2B,WAA3B;AACAD,ACaAoG,AChBE,AHCmBxG,AILL,EJKKA,EEerBwG,EDbApG,ADFyB,EAAE,CEetB,GAAG8F,EChBApF,GAAG,CDgBG,CAACsF,CDbD,AEHA4B,CFGC1H,IAAf,ACaA,AChBmB,CAAC2H,EFGE,UEHR,CAAmB,CFGjC,SEHc,CAAZ;ADiBFxB,AChBE,AHAJ,AILkB,CJHA,EASlB,CEeEA,KAAK,GAAGV,GChBDY,GDgBO,CAACX,AChBb,CAAUlF,GAAV,CDgBF,GChBmBkH,KAAjB;AFGF,ACcD,AChBE,AHADlI,AINgB,EJMhBA,CEaK,EFbF,EAAE,CAAP,CEgBO,EDdA,IAAIS,CAAC,GAAG,EAAb,EAAiBA,CAAC,AFGN,GEHS,IAArB,EAA2BA,CAAC,IAAI,EAAhC,EAAoC;AAClC,ACcFiG,ACtBS,AJWT,ACNQzG,EAAAA,EEiBRyG,AFjBU,EAAE,GEiBP,CHXD,CAAC,CEHG1G,ACcA,CFjBV,ECGa,CCcX,AHXUjB,EEHI0B,CAAC,GAAG,CAAhB,EFGG,CAAevB,MAApB,EAA4B,OAAO,CAAP;AEF1BoB,ACcFqG,ACvBS,AJYT,ACPqBzG,AIIvB,EJJuBA,EEkBrByG,EFlByB,AIIrBI,EHAFzG,ADJyB,CEkBtB,CHXChB,CKHG,CFcD2G,EEdI,IFcE,AHXA,AKHEW,CFcDT,EHXE5G,CEHD,CAACmB,CCcjB,CHXqB,CAAClB,KEHpB,AFGe,CEHS,AFGE,AKHhB,EHAV,AGAJ,EHAgCQ,CFGGjB,EEH/B,EAAiC,CAAjC,EAAoC,CAApC,CFG0B,CAAeG,MAAf,GAAwB,CAAnC,CAAjB;AEFEoB,ACcH,ACxBU,AJaT,ACRF,AIKAyG,CJdkB,CIclBA,CJJA,IIIK,CHADzG,AGAE+H,KLGG,CKHT,GAXkB,CLcJtJ,AKDd,IHFkB,CAAC4B,IFGV,CAAerB,GEHpB,CAAwBmB,CAAC,CAACG,EFGrB,CAAP,KEH0B,EAAxB,EAAsC,EAAtC,EAA0CZ,GAAG,GAAG,CAAhD;AACD,AEXQ,AJcV,ACRCA,EAAAA,GAAG,EAAE,EAAP;ACMC,ACaD,ACzBW,AHMAC,AIOX,EJPWA,EAAE,EAAE,AIOTqI,GFYC,IFnBP,GIOgB,GAAG,IAAIR,mBAAJ,CAAejB,IAAf,CAAnB;AFYSH,ACnBR,AHAuBxG,AIQxBoI,EJRwBpI,AIQxBoI,EFWS5B,EFnBmB,EAAE,CEmBhB,EAALA,CEXC,CAAC6B,GFWJ,IEXP;AFWgB5B,AFnBhB,AIUA,CJpBkB,EAWlB,CEkBgBA,EETVpE,GFSe,EAALoE,AETL,GAAG,IAAIxG,MLAN,QKAE,CAAU0G,IAAV,CAAd;AFSO,AHRL,ACVA7G,AIUFuC,EJVEvC,AIUFuC,CFQA,EFlBK,EAAE,AIUF,CAAC6F,CJVN,CDUM,CAAC,EKAP,GLAYrJ,SAAL,CAAeG,EEHb,IFGP,EAA4B,OAAO,CAAP;AEHrB,ACYV,AHPG,ACZSe,AIWXgD,EJXWhD,AIWXgD,EJXa,EAAE,GIWR,CLCCxD,AKDA+I,GJXR,AIWA,CAAY,ELCE,GAAG,EAAf,AKDF;ALEE,ACbsBtI,AIYzB,CApBD,CJQ0BA,IAAI,EAAE,EDaxBR,IAAI,GAAG,IAAX;AELA,AFMA,ACdF,CAXkB,EAYlB,CEoBIkH,MDbE/F,AFMAlB,GAAG,GAAG,CAAV,GENc,GAAG,KAAjB;AACA,ACaF,AHNE,ACfAK,EAAAA,GAAG,EAAE,EAAP,CCQMc,CFOC/B,IIdM+I,ACWAM,EFSAvB,GDbG,AFOd,CGMF,AHNiBjH,EEPE,ACaA,KDbjB,AFOA,CAAuB,UAAAZ,IAAI,EAAI;AEN/B,ACYiB,AHLf,AChBOiB,EAAAA,EAAE,EAAE,ICSPc,EFOElB,CChBV,IDgBe,GEPG,AFOAN,GEPG,CAAnB,AFOoB,CAACO,KAAL,CAAWd,IAAI,GAAG,EAAlB,IAAwB,EAAtC;AELF,AFOES,AClBoBS,EAAAA,IAAI,EDkBxBT,AClB0B,ECWtBuB,GAAG,CFOD,CAACnB,CEPGoB,IFOJ,CAAN,GEPkB,AFOF,CEPGC,AFOFzB,MAAM,CAACI,CEPd,CAAkBsB,GFO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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["class SmartArray {\n  constructor () {\n    this.dataArray = []\n  }\n\n  push (item) {\n    this.dataArray.push(item)\n  }\n\n  get avg () {\n    return this.dataArray.reduce((result, time) => {\n      return result + time\n    }, 0) / this.dataArray.length\n  }\n\n  get median () {\n    if (!this.dataArray.length) return 0\n    const midPoint = Math.floor(this.dataArray.length / 2)\n    return this.dataArray[midPoint]\n  }\n\n  get mode () {\n    if (!this.dataArray.length) return 0\n\n    const counts = {}\n    let mode = null\n    let max = 0\n\n    this.dataArray.forEach(item => {\n      const value = Math.round(item * 10) / 10\n\n      counts[value] = (counts[value] || 0) + 1\n\n      if (counts[value] > max) {\n        max = counts[value]\n        mode = value\n      }\n    })\n\n    return mode\n  }\n\n  empty () {\n    this.dataArray.length = 0\n  }\n}\n\nexport default SmartArray\n","\nexport const KEYS = [\n  { pos: 1, hz: 27.5, name: 'A0 Double Pedal A' },\n  { pos: 2, hz: 29.1352, name: 'A♯0/B♭0' },\n  { pos: 3, hz: 30.8677, name: 'B0' },\n  { pos: 4, hz: 32.7032, name: 'C1 Pedal C' },\n  { pos: 5, hz: 34.6478, name: 'C♯1/D♭1' },\n  { pos: 6, hz: 36.7081, name: 'D1' },\n  { pos: 7, hz: 38.8909, name: 'D♯1/E♭1' },\n  { pos: 8, hz: 41.2034, name: 'E1' },\n  { pos: 9, hz: 43.6535, name: 'F1' },\n  { pos: 10, hz: 46.2493, name: 'F♯1/G♭1' },\n  { pos: 11, hz: 48.9994, name: 'G1' },\n  { pos: 12, hz: 51.9131, name: 'G♯1/A♭1' },\n  { pos: 13, hz: 55, name: 'A1' },\n  { pos: 14, hz: 58.2705, name: 'A♯1/B♭1' },\n  { pos: 15, hz: 61.7354, name: 'B1' },\n  { pos: 16, hz: 65.4064, name: 'C2 Deep C' },\n  { pos: 17, hz: 69.2957, name: 'C♯2/D♭2' },\n  { pos: 18, hz: 73.4162, name: 'D2' },\n  { pos: 19, hz: 77.7817, name: 'D♯2/E♭2' },\n  { pos: 20, hz: 82.4069, name: 'E2' },\n  { pos: 21, hz: 87.3071, name: 'F2' },\n  { pos: 22, hz: 92.4986, name: 'F♯2/G♭2' },\n  { pos: 23, hz: 97.9989, name: 'G2' },\n  { pos: 24, hz: 103.826, name: 'G♯2/A♭2' },\n  { pos: 25, hz: 110, name: 'A2' },\n  { pos: 26, hz: 116.541, name: 'A♯2/B♭2' },\n  { pos: 27, hz: 123.471, name: 'B2' },\n  { pos: 28, hz: 130.813, name: 'C3' },\n  { pos: 29, hz: 138.591, name: 'C♯3/D♭3' },\n  { pos: 30, hz: 146.832, name: 'D3' },\n  { pos: 31, hz: 155.563, name: 'D♯3/E♭3' },\n  { pos: 32, hz: 164.814, name: 'E3' },\n  { pos: 33, hz: 174.614, name: 'F3' },\n  { pos: 34, hz: 184.997, name: 'F♯3/G♭3' },\n  { pos: 35, hz: 195.998, name: 'G3' },\n  { pos: 36, hz: 207.652, name: 'G♯3/A♭3' },\n  { pos: 37, hz: 220, name: 'A3' },\n  { pos: 38, hz: 233.082, name: 'A♯3/B♭3' },\n  { pos: 39, hz: 246.942, name: 'B3' },\n  { pos: 40, hz: 261.626, name: 'C4 Middle C' },\n  { pos: 41, hz: 277.183, name: 'C♯4/D♭4' },\n  { pos: 42, hz: 293.665, name: 'D4' },\n  { pos: 43, hz: 311.127, name: 'D♯4/E♭4' },\n  { pos: 44, hz: 329.628, name: 'E4' },\n  { pos: 45, hz: 349.228, name: 'F4' },\n  { pos: 46, hz: 369.994, name: 'F♯4/G♭4' },\n  { pos: 47, hz: 391.995, name: 'G4' },\n  { pos: 48, hz: 415.305, name: 'G♯4/A♭4' },\n  { pos: 49, hz: 440, name: 'A4 A440' },\n  { pos: 50, hz: 466.164, name: 'A♯4/B♭4' },\n  { pos: 51, hz: 493.883, name: 'B4' },\n  { pos: 52, hz: 523.251, name: 'C5 Tenor C' },\n  { pos: 53, hz: 554.365, name: 'C♯5/D♭5' },\n  { pos: 54, hz: 587.33, name: 'D5' },\n  { pos: 55, hz: 622.254, name: 'D♯5/E♭5' },\n  { pos: 56, hz: 659.255, name: 'E5' },\n  { pos: 57, hz: 698.456, name: 'F5' },\n  { pos: 58, hz: 739.989, name: 'F♯5/G♭5' },\n  { pos: 59, hz: 783.991, name: 'G5' },\n  { pos: 60, hz: 830.609, name: 'G♯5/A♭5' },\n  { pos: 61, hz: 880, name: 'A5' },\n  { pos: 62, hz: 932.328, name: 'A♯5/B♭5' },\n  { pos: 63, hz: 987.767, name: 'B5' },\n  { pos: 64, hz: 1046.5, name: 'C6 Soprano C(High C)' },\n  { pos: 65, hz: 1108.73, name: 'C♯6/D♭6' },\n  { pos: 66, hz: 1174.66, name: 'D6' },\n  { pos: 67, hz: 1244.51, name: 'D♯6/E♭6' },\n  { pos: 68, hz: 1318.51, name: 'E6' },\n  { pos: 69, hz: 1396.91, name: 'F6' },\n  { pos: 70, hz: 1479.98, name: 'F♯6/G♭6' },\n  { pos: 71, hz: 1567.98, name: 'G6' },\n  { pos: 72, hz: 1661.22, name: 'G♯6/A♭6' },\n  { pos: 73, hz: 1760, name: 'A6' },\n  { pos: 74, hz: 1864.66, name: 'A♯6/B♭6' },\n  { pos: 75, hz: 1975.53, name: 'B6' },\n  { pos: 76, hz: 2093, name: 'C7 Double high C' },\n  { pos: 77, hz: 2217.46, name: 'C♯7/D♭7' },\n  { pos: 78, hz: 2349.32, name: 'D7' },\n  { pos: 79, hz: 2489.02, name: 'D♯7/E♭7' },\n  { pos: 80, hz: 2637.02, name: 'E7' },\n  { pos: 81, hz: 2793.83, name: 'F7' },\n  { pos: 82, hz: 2959.96, name: 'F♯7/G♭7' },\n  { pos: 83, hz: 3135.96, name: 'G7' },\n  { pos: 84, hz: 3322.44, name: 'G♯7/A♭7' },\n  { pos: 85, hz: 3520, name: 'A7' },\n  { pos: 86, hz: 3729.31, name: 'A♯7/B♭7' },\n  { pos: 87, hz: 3951.07, name: 'B7' },\n  { pos: 88, hz: 4186.01, name: 'C8 Eighth octave' }\n]\n","import SmartArray from './SmartArray'\nimport { KEYS } from './constants'\n\nclass Audio {\n  constructor (elementsRefs) {\n    this.pitchSamples = new SmartArray()\n    this.elementsRefs = elementsRefs\n  }\n\n  drawPitchMarkers (canvas2Context) {\n    canvas2Context.fillStyle = 'firebrick'\n    canvas2Context.font = '14px serif'\n    for (let i = 25; i < 1200; i += 25) {\n      const pos = i / 2\n      canvas2Context.fillRect(65, pos, 4, 1)\n      canvas2Context.fillText(i.toString(), 70, pos + 5)\n    }\n  }\n\n  start () {\n    let audioReady = false\n    let loudEnough = false\n    const MIN_VOLUME = 5\n\n    const ref = document.location.pathname.replace(/^\\//, '')\n\n    const audioContext = new window.AudioContext()\n    const audioEl = this.elementsRefs[ref] || document.querySelector('audio')\n    const analyser = audioContext.createAnalyser()\n\n    const { sampleRate } = audioContext\n\n    analyser.fftSize = 2048\n    analyser.minDecibels = -90\n    analyser.maxDecibels = -10\n    const bufferLength = analyser.frequencyBinCount\n    const dataArray = new Uint8Array(bufferLength)\n\n    const canvasContext = this.elementsRefs.canvas.getContext('2d')\n\n    const userMediaConstraints = { audio: true }\n\n    const getUserMediaSuccess = stream => {\n      const audioSource = audioContext.createMediaStreamSource(stream)\n      this.elementsRefs.mic_audio.src = audioSource\n\n      audioSource.connect(analyser)\n      // comment/uncomment to play to speakers\n      // audioSource.connect(audioContext.destination); // out to the speakers\n      audioReady = true\n    }\n\n    const getUserMediaError = err => {\n      err && console.error(err)\n    }\n\n    navigator.getUserMedia(userMediaConstraints, getUserMediaSuccess, getUserMediaError)\n\n    // canvas2Context.fillStyle = 'rgba(0, 0, 0, 0.03)';\n\n    let lastItem = 0\n    const STEPS_THRESHOLD = 5\n\n    const getKey = () => {\n      const pitch = this.pitchSamples.mode\n      let closestLower = KEYS[0]\n      let closestHigher = KEYS[KEYS.length - 1]\n\n      for (let i = 0; i < KEYS.length; i++) {\n        if (KEYS[i].hz < pitch) closestLower = KEYS[i]\n        if (KEYS[i].hz > pitch) {\n          closestHigher = KEYS[i]\n          break // going from low to high so we can stop here\n        }\n      }\n\n      const distanceToLower = Math.abs(pitch - closestLower.hz)\n      const distanceToHigher = Math.abs(pitch - closestHigher.hz)\n\n      return Math.min(distanceToLower, distanceToHigher) === distanceToLower\n        ? closestLower\n        : closestHigher\n    }\n\n    const renderKey = () => {\n      const key = getKey()\n      // this.elementsRefs.note.textContent = `That was note number ${key.pos}: ${key.name}`;\n\n      // TODO (davidg): push this out into the Piano class\n      const keyEls = document.querySelectorAll('[piano-key]')\n\n      for (const keyEl of keyEls) {\n        keyEl.style.fill = ''\n        keyEl.classList.remove('piano-key--lit')\n      }\n\n      const pressedKeyEl = this.elementsRefs[`key_${key.pos}`]\n      pressedKeyEl.classList.add('piano-key--lit')\n      // if (keyEl) keyEl.style.fill = '#2196f3';\n      this.pitchSamples.empty()\n    }\n\n    const drawWave = () => {\n      if (!loudEnough) return\n      canvasContext.fillStyle = 'firebrick'\n      analyser.getByteTimeDomainData(dataArray)\n      canvasContext.fillRect(0, 128, 1024, 2)\n\n      let lastPos = 0\n      dataArray.forEach((item, i) => {\n        if (i > 0 && i < dataArray.length && item > 128 && lastItem <= 128) {\n          const elapsedSteps = i - lastPos\n          lastPos = i\n\n          if (elapsedSteps > STEPS_THRESHOLD) {\n            const hertz = 1 / (elapsedSteps / sampleRate) // sampleRate = 44100\n            this.pitchSamples.push(hertz)\n            // canvas2Context.fillRect(4, hertz / 2, 65, 1); // pitch marker\n          }\n        }\n\n        canvasContext.fillRect(i, item, 2, 2) // point in the wave\n\n        lastItem = item\n      })\n    }\n\n    const drawFreq = () => {\n      canvasContext.fillStyle = 'lightgray'\n      analyser.getByteFrequencyData(dataArray)\n      let volumeTotal = 0\n      canvasContext.fillRect(0, (300 - (256 / 10)), 1024, 1)\n\n      dataArray.forEach((item, i) => {\n        canvasContext.fillRect(i, 300 - item, 1, item)\n        volumeTotal += item\n      })\n\n      const volume = volumeTotal / dataArray.length\n      const nowLoudEnough = volume > MIN_VOLUME\n\n      if (loudEnough !== nowLoudEnough) {\n        this.pitchSamples.empty()\n      }\n\n      loudEnough = nowLoudEnough\n      this.elementsRefs.db.textContent = volume\n    }\n\n    const renderAudio = () => {\n      window.requestAnimationFrame(renderAudio)\n\n      if (!audioReady) return\n\n      canvasContext.clearRect(0, 0, 1024, 300)\n\n      drawFreq()\n      drawWave()\n    }\n\n    renderAudio()\n\n    setInterval(() => {\n      loudEnough && renderKey()\n    }, 250)\n\n    window.addEventListener('keydown', e => {\n      if (e.keyCode === 32) { // space\n        audioEl.paused ? audioEl.play() : audioEl.pause()\n      }\n    })\n\n    audioEl.play()\n  }\n}\n\nexport default Audio\n","import { KEYS } from './constants'\n\nconst COLORS = {\n  EBONY: 'ebony',\n  IVORY: 'ivory'\n}\nconst SHIFTS = {\n  LEFT: 'LEFT',\n  MIDDLE: 'MIDDLE',\n  RIGHT: 'RIGHT'\n}\n\nfunction getKeyDeets (keyPos) {\n  const key = keyPos % 12\n  let shift\n  let color\n\n  if (key === 2 || key === 7) {\n    shift = SHIFTS.RIGHT\n    color = COLORS.EBONY\n  } else if (key === 5 || key === 10) {\n    shift = SHIFTS.LEFT\n    color = COLORS.EBONY\n  } else if (key === 0) {\n    shift = SHIFTS.MIDDLE\n    color = COLORS.EBONY\n  } else {\n    shift = null\n    color = COLORS.IVORY\n  }\n  return { shift, color }\n}\n\nclass Piano {\n  constructor (refs) {\n    this.refs = refs\n  }\n\n  render () {\n    // key dimensions from http://www.rwgiangiulio.com/construction/manual/\n    const pianoEl = this.refs.piano\n    const ns = 'http://www.w3.org/2000/svg'\n\n    let left = 0\n    const blackKeyGroup = document.createElementNS(ns, 'g')\n    const whiteKeyGroup = document.createElementNS(ns, 'g')\n\n    KEYS.forEach(key => {\n      const keyRect = document.createElementNS(ns, 'rect')\n      const keyDeets = getKeyDeets(key.pos)\n      let x = left\n      let height = 125\n      let width = 22\n\n      if (keyDeets.color === COLORS.EBONY) {\n        height -= 45\n        width = 11\n\n        if (keyDeets.shift === SHIFTS.LEFT) {\n          x = left - 7\n        } else if (keyDeets.shift === SHIFTS.MIDDLE) {\n          x = left - 5\n        } else if (keyDeets.shift === SHIFTS.RIGHT) {\n          x = left - 3\n        } else {\n          console.warn('SHIFT was not set')\n        }\n      } else {\n        left += 22\n        const keyText = document.createElementNS(ns, 'text')\n        keyText.textContent = key.pos\n\n        keyText.setAttribute('x', x + width / 2)\n        keyText.setAttribute('y', 10)\n        keyText.setAttribute('text-anchor', 'middle')\n        whiteKeyGroup.appendChild(keyText)\n      }\n\n      keyRect.setAttribute('rx', 2)\n      keyRect.setAttribute('x', x)\n      keyRect.setAttribute('y', 14)\n      keyRect.setAttribute('width', width)\n      keyRect.setAttribute('height', height)\n      keyRect.setAttribute('data-ref', `key_${key.pos}`)\n      keyRect.setAttribute('piano-key', true)\n      keyRect.classList.add('piano-key')\n      keyRect.classList.add(`piano-key--${keyDeets.color}`)\n\n      if (keyDeets.color === COLORS.EBONY) {\n        blackKeyGroup.appendChild(keyRect)\n      } else {\n        whiteKeyGroup.appendChild(keyRect)\n      }\n    })\n\n    pianoEl.appendChild(whiteKeyGroup)\n    pianoEl.appendChild(blackKeyGroup)\n  }\n}\n\nexport default Piano\n","class RefManager {\n  constructor (refs) {\n    this.refs = Object.keys(refs).length ? refs : {}\n  }\n\n  getRefs () {\n    const refEls = document.querySelectorAll('[data-ref]')\n    for (const refEl of refEls) {\n      const ref = refEl.getAttribute('data-ref')\n      this.refs[ref] = refEl\n    }\n  }\n}\n\nexport default RefManager\n","import Audio from './Audio'\nimport Piano from './Piano'\nimport RefManager from './RefManager'\n\nconst start = () => {\n  // build refs object\n  const refEls = document.querySelectorAll('[data-ref]')\n  const refs = {}\n\n  for (const refEl of refEls) {\n    const ref = refEl.getAttribute('data-ref')\n    refs[ref] = refEl\n  }\n\n  const piano = new Piano()\n  piano.render()\n\n  // build the refs after rendering the piano\n  const refManager = new RefManager(refs)\n  refManager.getRefs()\n\n  const audio = new Audio(refs)\n  audio.start()\n  console.log('start')\n}\nexport default start\n","import start from './start'\n\nstart()\n"]}