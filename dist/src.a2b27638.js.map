{"version":3,"sources":["src/SmartArray.js","src/constants.js","src/Audio.js","src/Piano.js","src/RefManager.js","src/start.js","src/index.js"],"names":["SmartArray","dataArray","item","push","length","reduce","result","time","midPoint","Math","floor","counts","mode","max","forEach","value","round","KEYS","pos","hz","name","Audio","elementsRefs","pitchSamples","canvas2Context","fillStyle","font","i","fillRect","fillText","toString","audioReady","loudEnough","MIN_VOLUME","ref","document","location","pathname","replace","audioContext","window","AudioContext","audioEl","querySelector","analyser","createAnalyser","sampleRate","fftSize","minDecibels","maxDecibels","bufferLength","frequencyBinCount","Uint8Array","canvasContext","canvas","getContext","userMediaConstraints","audio","getUserMediaSuccess","stream","audioSource","createMediaStreamSource","mic_audio","src","connect","getUserMediaError","err","console","error","navigator","getUserMedia","lastItem","STEPS_THRESHOLD","getKey","pitch","closestLower","closestHigher","distanceToLower","abs","distanceToHigher","min","renderKey","key","keyEls","querySelectorAll","keyEl","style","fill","classList","remove","pressedKeyEl","add","empty","drawWave","getByteTimeDomainData","lastPos","elapsedSteps","hertz","drawFreq","getByteFrequencyData","volumeTotal","volume","nowLoudEnough","db","textContent","renderAudio","requestAnimationFrame","clearRect","setInterval","addEventListener","e","keyCode","paused","play","pause","COLORS","EBONY","IVORY","SHIFTS","LEFT","MIDDLE","RIGHT","getKeyDeets","keyPos","shift","color","Piano","refs","pianoEl","piano","ns","left","blackKeyGroup","createElementNS","whiteKeyGroup","keyRect","keyDeets","x","height","width","warn","keyText","setAttribute","appendChild","RefManager","refEls","refEl","getAttribute","start","refManager","getRefs","render"],"mappings":";;AMAA;;;;ALCO,AKCP,ILDaiB,IAAI,GAAG,CAClB;ACFF,ACAA,AFEIC,AIFJ,EJEIA,GAAG,EAAE,CAAP;AAAUC,EAAAA,EAAE,EAAE,IAAd;ACDF,ADCsBC,AIDtB,EJCsBA,IAAI,EAAE;AAA1B,CADkB,EAElB;AAAEF,AIDJ,EJCIA,GAAG,EAAE,CAAP;AAAUC,EAAAA,EAAE,EAAE,OAAd;AAAuBC,EAAAA,EDHnBpB,ECGuB,EAAE;ADF7B,ACEA,CAFkB,EAGlB,qBDHe;AGCjB,AHDiB,ACGbkB,AIAJ,EJAIA,EEFEiG,AEEAiC,CJAC,EAAE,CAAP,CIAS,CFFC,EEEE,CFFC,QEETA,KAAQ,GAAM;AFDlBhC,AFCUjG,AICV,EFFAiG,AFCUjG,EAAE,EAAE,CEDT,EAAE,IFCP,GEFa;AAEbkG,AHFE,ACEqBjG,AIEvB,EFFAiG,AFAuBjG,IAAI,AIErBiI,CFFD,CFAwB,CEAtB,AHFApJ,OKIS,ELJd,CKIiB,ELJA,EAAjB,AKIqB+I,mBAAJ,EAAnB;AFJa,AHCZ,ACCD,AIGAK,CFLF,AFDoB,CIMlBA,CJFA,SIEU,CAACC,OAAX;AFDF,AFDIpI,AIIF,EJJEA,EECEoG,ACNA0B,CHKC,CIICf,CJJC,CAAP,EECU,CEGC,EFHE,CEGC,IAAIH,cAAJ,CAAUuB,UAAU,CAACtB,IAArB,CAAd;AFFAR,ACNA,AHIUpG,AIKV8G,EFHAV,AFFUpG,AIKV8G,EJLY,EEER,AFFU,CIKT,CFHC,AEGAsB,KJLN,CECa,AEIb,QDTaxB,IAAb,EAAmB;ADOnBP,ACPmB,AHIIpG,AIMvBiI,EFHA7B,AFHuBpG,AIMvBiI,IJN2B,EEGrB,AFHuB,EEGrB,EEGE,CAACC,KFLE,EEKb;AFFA7B,AFJA,AIQA,CJZkB,CEQlBA,CFHA,GIOMhE,CFJD,EAAE,EEII,GAAG,IAAIpC,OLRZnB,MAAM,CKQE,CAAUmJ,UAAU,CAACtB,IAArB,CAAd;AFPa,ACJX,AJIA,ACAA7G,AIQFuC,CFRF,CFAIvC,AIQFuC,GJRK,EAAE,AIQF,CJRL,AIQM2F,CDZCrB,EJIA9H,EIJL,ACYF,GDZc8H,IAAI,AJIhB,CAAe5H,GIJK,CJIpB,CIJA,AJIoBD,IAApB;AIHD,AJIA,ACDSiB,AISX,CAXD,CJEYA,EAAE,EAAE,OAAd;AEMF,AFNyBC,EAAAA,ECHnBC,EDGuB,EAAE,CEMtBqG,WAAT,CAAsBC,MAAtB,EAA8B;ADR5B,ACSA,AFPA,CALkB,EAMlB,GEMMzC,GAAG,GAAGyC,GEICyB,EHbA9H,CCSK,GAAG,EAArB,MDTA,EAA2B;AAAA,ACU3B,AFPEJ,EAAAA,GAAG,CEOD0G,CFPG,CAAP,GEOA,iBH4BS;AG3BT,AH4BE,ACpCQzG,EAAAA,EAAE,EEQR0G,AFRU,KEQd,AH4BO5H,ECpCP,ODoCE,CAAeG,MAAf,GItCS,AJsCe,CAAxB;AEtCA,AECA,AJsCD,ACrCsBgB,EAAAA,IAAI,EAAE,CCFtBG,CECC0H,MAAM,GAAG9G,EFDf,GAAoB,GECG,CFDCnC,AECAoF,gBAAT,CAA0B,EFDrB,EAApB,QECe,CAAf;AFAA,ACWF,AFVA,CANkB,EAOlB,GESIF,GDXG5D,ACWA,KAAK,CAAR,IAAa4D,EDXf,CCWkB,EDXE5D,GCWG,CAAzB,EAA4B,MDX1B;AACD,ACWCsG,ACbS,AHGT1G,EAAAA,EEUA0G,CFVG,EAAE,CAAP,CEUO,GAAGN,MAAM,CAACG,KAAf,yBCXoBwB,MAFX;ADcTpB,ACdS,AHGD1G,EAAAA,EEWR0G,AFXU,EAAE,GEWP,GAAGV,CFXV,KEWgB,CAACC,KAAf,AHVS;AGWV,AHVC,ACFqBhG,EAAAA,CESvB,GFT2B,EAAE,CEYtB,IAAI8D,AHVF,GGUK,EHVAjF,GGUK,CAAR,IAAaiF,CHVf,CAAe7E,CGUG,KAAK,AHVvB,CAAsB,CGUxB,EAA6B,OHVJC,MAAD,EAASC,IAAT,EAAkB;AGW/CqH,AChBS,AJMP,ACHJ,CAPkB,EAQlB,CEYEA,KAAK,GAAGN,GHVChH,GGUK,CAACiH,EHVA,EGUf,CHVkBhH,IAAhB;AGWFsH,ACfA,AJKC,ACHD3G,EAAAA,EEaA2G,CFbG,EDCI,ACDF,CAAP,CEaO,AHVF,CAFI,EGYCV,EHVA,IGUM,CAACC,AHVFnH,KGUb,IHVQ,CAAeG,MAFvB,EEDgBoB,gBAAgB,OEFJ;AFG5BA,ACaD,AChB6B,AJM7B,ACJSL,EAAAA,CEWH,CFXK,ECCVK,ADDY,GEcP,IAAI0D,AFdX,CGFagE,EDgBC,GChBgB,CFGd,CAACzH,ACaE,CAAZ,EAAe,MDbpB,GAA2B,WAA3B;AACAD,ACaAoG,AChBE,AHCmBxG,EAAAA,EEerBwG,EDbApG,ADFyB,EAAE,CEetB,GAAG8F,EChBApF,GAAG,CDgBG,CAACsF,CDbD,AEHA0B,CFGCxH,IAAf,ACaA,AChBmB,CAACyH,EFGE,UEHR,CAAmB,CFGjC,SEHc,CAAZ;ADiBFtB,AChBE,AHAJ,CARkB,EASlB,CEeEA,KAAK,GAAGV,GChBDY,GDgBO,CAACX,AChBb,CAAUlF,GAAV,CDgBF,GChBmBgH,KAAjB;AFGF,ACcD,AChBE,AHADhI,EAAAA,CEaK,EFbF,EAAE,CAAP,CEgBO,EDdA,IAAIS,CAAC,GAAG,EAAb,EAAiBA,CAAC,AFGN,GEHS,IAArB,EAA2BA,CAAC,IAAI,EAAhC,EAAoC;AAClC,ACcFiG,ACtBS,AJWT,ACNQzG,EAAAA,EEiBRyG,AFjBU,EAAE,GEiBP,CHXD,CAAC,CEHG1G,ACcA,CFjBV,ECGa,CCcX,AHXUjB,EEHI0B,CAAC,GAAG,CAAhB,EFGG,CAAevB,MAApB,EAA4B,OAAO,CAAP;AEF1BoB,ACcFqG,ACvBS,AJYT,ACPqBzG,EAAAA,EEkBrByG,EFlByB,ECIvBrG,ADJyB,CEkBtB,CHXChB,EGWE2G,MAAM,AHXA,CGWCE,EHXE5G,CEHD,CAACmB,CCcjB,CHXqB,CAAClB,KEHpB,AFGe,CEHS,AFGE,EEH1B,EAA4BQ,CFGGjB,EEH/B,EAAiC,CAAjC,EAAoC,CAApC,CFG0B,CAAeG,MAAf,GAAwB,CAAnC,CAAjB;AEFEoB,ACcH,ACxBU,AJaT,ACRF,CATkB,EAUlB,KCIIA,KFGK,KAAKvB,IEHI,CAAC4B,IFGV,CAAerB,GEHpB,CAAwBmB,CAAC,CAACG,EFGrB,CAAP,KEH0B,EAAxB,EAAsC,EAAtC,EAA0CZ,GAAG,GAAG,CAAhD;AACD,AEXQ,AJcV,ACRCA,EAAAA,GAAG,EAAE,EAAP;ACMC,ACaD,ACzBW,AHMAC,EAAAA,EAA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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["class SmartArray {\n  constructor () {\n    this.dataArray = []\n  }\n\n  push (item) {\n    this.dataArray.push(item)\n  }\n\n  get avg () {\n    return this.dataArray.reduce((result, time) => {\n      return result + time\n    }, 0) / this.dataArray.length\n  }\n\n  get median () {\n    if (!this.dataArray.length) return 0\n    const midPoint = Math.floor(this.dataArray.length / 2)\n    return this.dataArray[midPoint]\n  }\n\n  get mode () {\n    if (!this.dataArray.length) return 0\n\n    const counts = {}\n    let mode = null\n    let max = 0\n\n    this.dataArray.forEach(item => {\n      const value = Math.round(item * 10) / 10\n\n      counts[value] = (counts[value] || 0) + 1\n\n      if (counts[value] > max) {\n        max = counts[value]\n        mode = value\n      }\n    })\n\n    return mode\n  }\n\n  empty () {\n    this.dataArray.length = 0\n  }\n}\n\nexport default SmartArray\n","\nexport const KEYS = [\n  { pos: 1, hz: 27.5, name: 'A0 Double Pedal A' },\n  { pos: 2, hz: 29.1352, name: 'A♯0/B♭0' },\n  { pos: 3, hz: 30.8677, name: 'B0' },\n  { pos: 4, hz: 32.7032, name: 'C1 Pedal C' },\n  { pos: 5, hz: 34.6478, name: 'C♯1/D♭1' },\n  { pos: 6, hz: 36.7081, name: 'D1' },\n  { pos: 7, hz: 38.8909, name: 'D♯1/E♭1' },\n  { pos: 8, hz: 41.2034, name: 'E1' },\n  { pos: 9, hz: 43.6535, name: 'F1' },\n  { pos: 10, hz: 46.2493, name: 'F♯1/G♭1' },\n  { pos: 11, hz: 48.9994, name: 'G1' },\n  { pos: 12, hz: 51.9131, name: 'G♯1/A♭1' },\n  { pos: 13, hz: 55, name: 'A1' },\n  { pos: 14, hz: 58.2705, name: 'A♯1/B♭1' },\n  { pos: 15, hz: 61.7354, name: 'B1' },\n  { pos: 16, hz: 65.4064, name: 'C2 Deep C' },\n  { pos: 17, hz: 69.2957, name: 'C♯2/D♭2' },\n  { pos: 18, hz: 73.4162, name: 'D2' },\n  { pos: 19, hz: 77.7817, name: 'D♯2/E♭2' },\n  { pos: 20, hz: 82.4069, name: 'E2' },\n  { pos: 21, hz: 87.3071, name: 'F2' },\n  { pos: 22, hz: 92.4986, name: 'F♯2/G♭2' },\n  { pos: 23, hz: 97.9989, name: 'G2' },\n  { pos: 24, hz: 103.826, name: 'G♯2/A♭2' },\n  { pos: 25, hz: 110, name: 'A2' },\n  { pos: 26, hz: 116.541, name: 'A♯2/B♭2' },\n  { pos: 27, hz: 123.471, name: 'B2' },\n  { pos: 28, hz: 130.813, name: 'C3' },\n  { pos: 29, hz: 138.591, name: 'C♯3/D♭3' },\n  { pos: 30, hz: 146.832, name: 'D3' },\n  { pos: 31, hz: 155.563, name: 'D♯3/E♭3' },\n  { pos: 32, hz: 164.814, name: 'E3' },\n  { pos: 33, hz: 174.614, name: 'F3' },\n  { pos: 34, hz: 184.997, name: 'F♯3/G♭3' },\n  { pos: 35, hz: 195.998, name: 'G3' },\n  { pos: 36, hz: 207.652, name: 'G♯3/A♭3' },\n  { pos: 37, hz: 220, name: 'A3' },\n  { pos: 38, hz: 233.082, name: 'A♯3/B♭3' },\n  { pos: 39, hz: 246.942, name: 'B3' },\n  { pos: 40, hz: 261.626, name: 'C4 Middle C' },\n  { pos: 41, hz: 277.183, name: 'C♯4/D♭4' },\n  { pos: 42, hz: 293.665, name: 'D4' },\n  { pos: 43, hz: 311.127, name: 'D♯4/E♭4' },\n  { pos: 44, hz: 329.628, name: 'E4' },\n  { pos: 45, hz: 349.228, name: 'F4' },\n  { pos: 46, hz: 369.994, name: 'F♯4/G♭4' },\n  { pos: 47, hz: 391.995, name: 'G4' },\n  { pos: 48, hz: 415.305, name: 'G♯4/A♭4' },\n  { pos: 49, hz: 440, name: 'A4 A440' },\n  { pos: 50, hz: 466.164, name: 'A♯4/B♭4' },\n  { pos: 51, hz: 493.883, name: 'B4' },\n  { pos: 52, hz: 523.251, name: 'C5 Tenor C' },\n  { pos: 53, hz: 554.365, name: 'C♯5/D♭5' },\n  { pos: 54, hz: 587.33, name: 'D5' },\n  { pos: 55, hz: 622.254, name: 'D♯5/E♭5' },\n  { pos: 56, hz: 659.255, name: 'E5' },\n  { pos: 57, hz: 698.456, name: 'F5' },\n  { pos: 58, hz: 739.989, name: 'F♯5/G♭5' },\n  { pos: 59, hz: 783.991, name: 'G5' },\n  { pos: 60, hz: 830.609, name: 'G♯5/A♭5' },\n  { pos: 61, hz: 880, name: 'A5' },\n  { pos: 62, hz: 932.328, name: 'A♯5/B♭5' },\n  { pos: 63, hz: 987.767, name: 'B5' },\n  { pos: 64, hz: 1046.5, name: 'C6 Soprano C(High C)' },\n  { pos: 65, hz: 1108.73, name: 'C♯6/D♭6' },\n  { pos: 66, hz: 1174.66, name: 'D6' },\n  { pos: 67, hz: 1244.51, name: 'D♯6/E♭6' },\n  { pos: 68, hz: 1318.51, name: 'E6' },\n  { pos: 69, hz: 1396.91, name: 'F6' },\n  { pos: 70, hz: 1479.98, name: 'F♯6/G♭6' },\n  { pos: 71, hz: 1567.98, name: 'G6' },\n  { pos: 72, hz: 1661.22, name: 'G♯6/A♭6' },\n  { pos: 73, hz: 1760, name: 'A6' },\n  { pos: 74, hz: 1864.66, name: 'A♯6/B♭6' },\n  { pos: 75, hz: 1975.53, name: 'B6' },\n  { pos: 76, hz: 2093, name: 'C7 Double high C' },\n  { pos: 77, hz: 2217.46, name: 'C♯7/D♭7' },\n  { pos: 78, hz: 2349.32, name: 'D7' },\n  { pos: 79, hz: 2489.02, name: 'D♯7/E♭7' },\n  { pos: 80, hz: 2637.02, name: 'E7' },\n  { pos: 81, hz: 2793.83, name: 'F7' },\n  { pos: 82, hz: 2959.96, name: 'F♯7/G♭7' },\n  { pos: 83, hz: 3135.96, name: 'G7' },\n  { pos: 84, hz: 3322.44, name: 'G♯7/A♭7' },\n  { pos: 85, hz: 3520, name: 'A7' },\n  { pos: 86, hz: 3729.31, name: 'A♯7/B♭7' },\n  { pos: 87, hz: 3951.07, name: 'B7' },\n  { pos: 88, hz: 4186.01, name: 'C8 Eighth octave' }\n]\n","import SmartArray from './SmartArray'\nimport { KEYS } from './constants'\n\nclass Audio {\n  constructor (elementsRefs) {\n    this.pitchSamples = new SmartArray()\n    this.elementsRefs = elementsRefs\n  }\n\n  drawPitchMarkers (canvas2Context) {\n    canvas2Context.fillStyle = 'firebrick'\n    canvas2Context.font = '14px serif'\n    for (let i = 25; i < 1200; i += 25) {\n      const pos = i / 2\n      canvas2Context.fillRect(65, pos, 4, 1)\n      canvas2Context.fillText(i.toString(), 70, pos + 5)\n    }\n  }\n\n  start () {\n    let audioReady = false\n    let loudEnough = false\n    const MIN_VOLUME = 5\n\n    const ref = document.location.pathname.replace(/^\\//, '')\n\n    const audioContext = new window.AudioContext()\n    const audioEl = this.elementsRefs[ref] || document.querySelector('audio')\n    const analyser = audioContext.createAnalyser()\n\n    const { sampleRate } = audioContext\n\n    analyser.fftSize = 2048\n    analyser.minDecibels = -90\n    analyser.maxDecibels = -10\n    const bufferLength = analyser.frequencyBinCount\n    const dataArray = new Uint8Array(bufferLength)\n\n    const canvasContext = this.elementsRefs.canvas.getContext('2d')\n\n    const userMediaConstraints = { audio: true }\n\n    const getUserMediaSuccess = stream => {\n      const audioSource = audioContext.createMediaStreamSource(stream)\n      this.elementsRefs.mic_audio.src = audioSource\n\n      audioSource.connect(analyser)\n      // comment/uncomment to play to speakers\n      // audioSource.connect(audioContext.destination); // out to the speakers\n      audioReady = true\n    }\n\n    const getUserMediaError = err => {\n      err && console.error(err)\n    }\n\n    navigator.getUserMedia(userMediaConstraints, getUserMediaSuccess, getUserMediaError)\n\n    let lastItem = 0\n    const STEPS_THRESHOLD = 5\n\n    const getKey = () => {\n      const pitch = this.pitchSamples.mode\n      let closestLower = KEYS[0]\n      let closestHigher = KEYS[KEYS.length - 1]\n\n      for (let i = 0; i < KEYS.length; i++) {\n        if (KEYS[i].hz < pitch) closestLower = KEYS[i]\n        if (KEYS[i].hz > pitch) {\n          closestHigher = KEYS[i]\n          break // going from low to high so we can stop here\n        }\n      }\n\n      const distanceToLower = Math.abs(pitch - closestLower.hz)\n      const distanceToHigher = Math.abs(pitch - closestHigher.hz)\n\n      return Math.min(distanceToLower, distanceToHigher) === distanceToLower\n        ? closestLower\n        : closestHigher\n    }\n\n    const renderKey = () => {\n      const key = getKey()\n\n      const keyEls = document.querySelectorAll('[piano-key]')\n\n      for (const keyEl of keyEls) {\n        keyEl.style.fill = ''\n        keyEl.classList.remove('piano-key--lit')\n      }\n\n      const pressedKeyEl = this.elementsRefs[`key_${key.pos}`]\n      pressedKeyEl.classList.add('piano-key--lit')\n\n      this.pitchSamples.empty()\n    }\n\n    const drawWave = () => {\n      if (!loudEnough) return\n      canvasContext.fillStyle = 'firebrick'\n      analyser.getByteTimeDomainData(dataArray)\n      canvasContext.fillRect(0, 128, 1024, 2)\n\n      let lastPos = 0\n      dataArray.forEach((item, i) => {\n        if (i > 0 && i < dataArray.length && item > 128 && lastItem <= 128) {\n          const elapsedSteps = i - lastPos\n          lastPos = i\n\n          if (elapsedSteps > STEPS_THRESHOLD) {\n            const hertz = 1 / (elapsedSteps / sampleRate) // sampleRate = 44100\n            this.pitchSamples.push(hertz)\n          }\n        }\n\n        canvasContext.fillRect(i, item, 2, 2) // point in the wave\n\n        lastItem = item\n      })\n    }\n\n    const drawFreq = () => {\n      canvasContext.fillStyle = 'lightgray'\n      analyser.getByteFrequencyData(dataArray)\n      let volumeTotal = 0\n      canvasContext.fillRect(0, (300 - (256 / 10)), 1024, 1)\n\n      dataArray.forEach((item, i) => {\n        canvasContext.fillRect(i, 300 - item, 1, item)\n        volumeTotal += item\n      })\n\n      const volume = volumeTotal / dataArray.length\n      const nowLoudEnough = volume > MIN_VOLUME\n\n      if (loudEnough !== nowLoudEnough) {\n        this.pitchSamples.empty()\n      }\n\n      loudEnough = nowLoudEnough\n      this.elementsRefs.db.textContent = volume\n    }\n\n    const renderAudio = () => {\n      window.requestAnimationFrame(renderAudio)\n\n      if (!audioReady) return\n\n      canvasContext.clearRect(0, 0, 1024, 300)\n\n      drawFreq()\n      drawWave()\n    }\n\n    renderAudio()\n\n    setInterval(() => {\n      loudEnough && renderKey()\n    }, 250)\n\n    window.addEventListener('keydown', e => {\n      if (e.keyCode === 32) { // space\n        audioEl.paused ? audioEl.play() : audioEl.pause()\n      }\n    })\n\n    audioEl.play()\n  }\n}\n\nexport default Audio\n","import { KEYS } from './constants'\n\nconst COLORS = {\n  EBONY: 'ebony',\n  IVORY: 'ivory'\n}\nconst SHIFTS = {\n  LEFT: 'LEFT',\n  MIDDLE: 'MIDDLE',\n  RIGHT: 'RIGHT'\n}\n\nfunction getKeyDeets (keyPos) {\n  const key = keyPos % 12\n  let shift\n  let color\n\n  if (key === 2 || key === 7) {\n    shift = SHIFTS.RIGHT\n    color = COLORS.EBONY\n  } else if (key === 5 || key === 10) {\n    shift = SHIFTS.LEFT\n    color = COLORS.EBONY\n  } else if (key === 0) {\n    shift = SHIFTS.MIDDLE\n    color = COLORS.EBONY\n  } else {\n    shift = null\n    color = COLORS.IVORY\n  }\n  return { shift, color }\n}\n\nclass Piano {\n  constructor (refs) {\n    this.refs = refs\n  }\n\n  render () {\n    // key dimensions from http://www.rwgiangiulio.com/construction/manual/\n    const pianoEl = this.refs.piano\n    const ns = 'http://www.w3.org/2000/svg'\n\n    let left = 0\n    const blackKeyGroup = document.createElementNS(ns, 'g')\n    const whiteKeyGroup = document.createElementNS(ns, 'g')\n\n    KEYS.forEach(key => {\n      const keyRect = document.createElementNS(ns, 'rect')\n      const keyDeets = getKeyDeets(key.pos)\n      let x = left\n      let height = 125\n      let width = 22\n\n      if (keyDeets.color === COLORS.EBONY) {\n        height -= 45\n        width = 11\n\n        if (keyDeets.shift === SHIFTS.LEFT) {\n          x = left - 7\n        } else if (keyDeets.shift === SHIFTS.MIDDLE) {\n          x = left - 5\n        } else if (keyDeets.shift === SHIFTS.RIGHT) {\n          x = left - 3\n        } else {\n          console.warn('SHIFT was not set')\n        }\n      } else {\n        left += 22\n        const keyText = document.createElementNS(ns, 'text')\n        keyText.textContent = key.pos\n\n        keyText.setAttribute('x', x + width / 2)\n        keyText.setAttribute('y', 10)\n        keyText.setAttribute('text-anchor', 'middle')\n        whiteKeyGroup.appendChild(keyText)\n      }\n\n      keyRect.setAttribute('rx', 2)\n      keyRect.setAttribute('x', x)\n      keyRect.setAttribute('y', 14)\n      keyRect.setAttribute('width', width)\n      keyRect.setAttribute('height', height)\n      keyRect.setAttribute('data-ref', `key_${key.pos}`)\n      keyRect.setAttribute('piano-key', true)\n      keyRect.classList.add('piano-key')\n      keyRect.classList.add(`piano-key--${keyDeets.color}`)\n\n      if (keyDeets.color === COLORS.EBONY) {\n        blackKeyGroup.appendChild(keyRect)\n      } else {\n        whiteKeyGroup.appendChild(keyRect)\n      }\n    })\n\n    pianoEl.appendChild(whiteKeyGroup)\n    pianoEl.appendChild(blackKeyGroup)\n  }\n}\n\nexport default Piano\n","class RefManager {\n  constructor (refs) {\n    this.refs = refs || {}\n  }\n\n  getRefs () {\n    const refEls = document.querySelectorAll('[data-ref]')\n    for (const refEl of refEls) {\n      const ref = refEl.getAttribute('data-ref')\n      this.refs[ref] = refEl\n    }\n  }\n}\n\nexport default RefManager\n","import Audio from './Audio'\nimport Piano from './Piano'\nimport RefManager from './RefManager'\n\nconst start = () => {\n  // build the refs after rendering the piano\n  const refManager = new RefManager()\n  refManager.getRefs()\n\n  const piano = new Piano(refManager.refs)\n  piano.render()\n  refManager.getRefs()\n\n  const audio = new Audio(refManager.refs)\n  audio.start()\n}\n\nexport default start\n","import start from './start'\n\nstart()\n"]}