{"version":3,"sources":["../app/client/audio.js","../app/client/notes.js","../app/client/SmartArray.js","../app/client/start.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function() {\r\n  const KEYS = [\r\n    {key: 1, hz: 27.5, name: 'A0 Double Pedal A'},\r\n    {key: 2, hz: 29.1352, name: 'A♯0/B♭0'},\r\n    {key: 3, hz: 30.8677, name: 'B0'},\r\n    {key: 4, hz: 32.7032, name: 'C1 Pedal C'},\r\n    {key: 5, hz: 34.6478, name: 'C♯1/D♭1'},\r\n    {key: 6, hz: 36.7081, name: 'D1'},\r\n    {key: 7, hz: 38.8909, name: 'D♯1/E♭1'},\r\n    {key: 8, hz: 41.2034, name: 'E1'},\r\n    {key: 9, hz: 43.6535, name: 'F1'},\r\n    {key: 10, hz: 46.2493, name: 'F♯1/G♭1'},\r\n    {key: 11, hz: 48.9994, name: 'G1'},\r\n    {key: 12, hz: 51.9131, name: 'G♯1/A♭1'},\r\n    {key: 13, hz: 55, name: 'A1'},\r\n    {key: 14, hz: 58.2705, name: 'A♯1/B♭1'},\r\n    {key: 15, hz: 61.7354, name: 'B1'},\r\n    {key: 16, hz: 65.4064, name: 'C2 Deep C'},\r\n    {key: 17, hz: 69.2957, name: 'C♯2/D♭2'},\r\n    {key: 18, hz: 73.4162, name: 'D2'},\r\n    {key: 19, hz: 77.7817, name: 'D♯2/E♭2'},\r\n    {key: 20, hz: 82.4069, name: 'E2'},\r\n    {key: 21, hz: 87.3071, name: 'F2'},\r\n    {key: 22, hz: 92.4986, name: 'F♯2/G♭2'},\r\n    {key: 23, hz: 97.9989, name: 'G2'},\r\n    {key: 24, hz: 103.826, name: 'G♯2/A♭2'},\r\n    {key: 25, hz: 110, name: 'A2'},\r\n    {key: 26, hz: 116.541, name: 'A♯2/B♭2'},\r\n    {key: 27, hz: 123.471, name: 'B2'},\r\n    {key: 28, hz: 130.813, name: 'C3'},\r\n    {key: 29, hz: 138.591, name: 'C♯3/D♭3'},\r\n    {key: 30, hz: 146.832, name: 'D3'},\r\n    {key: 31, hz: 155.563, name: 'D♯3/E♭3'},\r\n    {key: 32, hz: 164.814, name: 'E3'},\r\n    {key: 33, hz: 174.614, name: 'F3'},\r\n    {key: 34, hz: 184.997, name: 'F♯3/G♭3'},\r\n    {key: 35, hz: 195.998, name: 'G3'},\r\n    {key: 36, hz: 207.652, name: 'G♯3/A♭3'},\r\n    {key: 37, hz: 220, name: 'A3'},\r\n    {key: 38, hz: 233.082, name: 'A♯3/B♭3'},\r\n    {key: 39, hz: 246.942, name: 'B3'},\r\n    {key: 40, hz: 261.626, name: 'C4 Middle C'},\r\n    {key: 41, hz: 277.183, name: 'C♯4/D♭4'},\r\n    {key: 42, hz: 293.665, name: 'D4'},\r\n    {key: 43, hz: 311.127, name: 'D♯4/E♭4'},\r\n    {key: 44, hz: 329.628, name: 'E4'},\r\n    {key: 45, hz: 349.228, name: 'F4'},\r\n    {key: 46, hz: 369.994, name: 'F♯4/G♭4'},\r\n    {key: 47, hz: 391.995, name: 'G4'},\r\n    {key: 48, hz: 415.305, name: 'G♯4/A♭4'},\r\n    {key: 49, hz: 440, name: 'A4 A440'},\r\n    {key: 50, hz: 466.164, name: 'A♯4/B♭4'},\r\n    {key: 51, hz: 493.883, name: 'B4'},\r\n    {key: 52, hz: 523.251, name: 'C5 Tenor C'},\r\n    {key: 53, hz: 554.365, name: 'C♯5/D♭5'},\r\n    {key: 54, hz: 587.33, name: 'D5'},\r\n    {key: 55, hz: 622.254, name: 'D♯5/E♭5'},\r\n    {key: 56, hz: 659.255, name: 'E5'},\r\n    {key: 57, hz: 698.456, name: 'F5'},\r\n    {key: 58, hz: 739.989, name: 'F♯5/G♭5'},\r\n    {key: 59, hz: 783.991, name: 'G5'},\r\n    {key: 60, hz: 830.609, name: 'G♯5/A♭5'},\r\n    {key: 61, hz: 880, name: 'A5'},\r\n    {key: 62, hz: 932.328, name: 'A♯5/B♭5'},\r\n    {key: 63, hz: 987.767, name: 'B5'},\r\n    {key: 64, hz: 1046.5, name: 'C6 Soprano C(High C)'},\r\n    {key: 65, hz: 1108.73, name: 'C♯6/D♭6'},\r\n    {key: 66, hz: 1174.66, name: 'D6'},\r\n    {key: 67, hz: 1244.51, name: 'D♯6/E♭6'},\r\n    {key: 68, hz: 1318.51, name: 'E6'},\r\n    {key: 69, hz: 1396.91, name: 'F6'},\r\n    {key: 70, hz: 1479.98, name: 'F♯6/G♭6'},\r\n    {key: 71, hz: 1567.98, name: 'G6'},\r\n    {key: 72, hz: 1661.22, name: 'G♯6/A♭6'},\r\n    {key: 73, hz: 1760, name: 'A6'},\r\n    {key: 74, hz: 1864.66, name: 'A♯6/B♭6'},\r\n    {key: 75, hz: 1975.53, name: 'B6'},\r\n    {key: 76, hz: 2093, name: 'C7 Double high C'},\r\n    {key: 77, hz: 2217.46, name: 'C♯7/D♭7'},\r\n    {key: 78, hz: 2349.32, name: 'D7'},\r\n    {key: 79, hz: 2489.02, name: 'D♯7/E♭7'},\r\n    {key: 80, hz: 2637.02, name: 'E7'},\r\n    {key: 81, hz: 2793.83, name: 'F7'},\r\n    {key: 82, hz: 2959.96, name: 'F♯7/G♭7'},\r\n    {key: 83, hz: 3135.96, name: 'G7'},\r\n    {key: 84, hz: 3322.44, name: 'G♯7/A♭7'},\r\n    {key: 85, hz: 3520, name: 'A7'},\r\n    {key: 86, hz: 3729.31, name: 'A♯7/B♭7'},\r\n    {key: 87, hz: 3951.07, name: 'B7'},\r\n    {key: 88, hz: 4186.01, name: 'C8 Eighth octave'},\r\n  ];\r\n\r\n  class SmartArray {\r\n    constructor() {\r\n      this.dataArray = [];\r\n    }\r\n\r\n    push(item) {\r\n      this.dataArray.push(item);\r\n    }\r\n\r\n    get avg() {\r\n      return this.dataArray.reduce((result, time) => {\r\n          return result + time;\r\n        }, 0) / this.dataArray.length;\r\n    }\r\n\r\n    get median() {\r\n      if (!this.dataArray.length) return 0;\r\n      const midPoint = Math.floor(this.dataArray.length / 2);\r\n      return this.dataArray[midPoint];\r\n    }\r\n\r\n    get mode() {\r\n      if (!this.dataArray.length) return 0;\r\n\r\n      const counts = {};\r\n      let mode = null;\r\n      let max = 0;\r\n\r\n      this.dataArray.forEach(item => {\r\n        const value = Math.round(item * 10) / 10;\r\n\r\n        counts[value] = (counts[value] || 0) + 1;\r\n\r\n        if (counts[value] > max) {\r\n          max = counts[value];\r\n          mode = value;\r\n        }\r\n      });\r\n\r\n      return mode;\r\n    }\r\n  }\r\n\r\n  class Audio {\r\n    constructor() {\r\n      this.pitchSamples = new SmartArray();\r\n    }\r\n\r\n    drawPitchMarkers(canvas2Context) {\r\n      canvas2Context.fillStyle = 'firebrick';\r\n      canvas2Context.font = '14px serif';\r\n      for (let i = 25; i < 1200; i += 25) {\r\n        const pos = i / 2;\r\n        canvas2Context.fillRect(65, pos, 4, 1);\r\n        canvas2Context.fillText(i.toString(), 70, pos + 5);\r\n      }\r\n    }\r\n\r\n    setupAudioContext(audioEl) {\r\n      const audioContext = new window.AudioContext();\r\n      const audioSource = audioContext.createMediaElementSource(audioEl);\r\n      const analyser = audioContext.createAnalyser();\r\n      audioSource.connect(analyser);\r\n      audioSource.connect(audioContext.destination); // out to the speakers\r\n\r\n      return {audioContext, audioSource, analyser};\r\n    }\r\n\r\n    start() {\r\n      const {refs} = SP_APP;\r\n\r\n      const ref = document.location.pathname.replace(/^\\//, '');\r\n      let audioEl = refs[ref] || document.querySelector('audio');\r\n      let {audioContext, analyser} = this.setupAudioContext(audioEl);\r\n      const {sampleRate} = audioContext;\r\n\r\n      analyser.fftSize = 2048;\r\n      const bufferLength = analyser.frequencyBinCount;\r\n      const dataArray = new Uint8Array(bufferLength);\r\n\r\n      const canvasContext = refs.canvas.getContext('2d');\r\n      const canvas2Context = refs.canvas2.getContext('2d');\r\n      this.drawPitchMarkers(canvas2Context);\r\n\r\n      canvas2Context.fillStyle = 'rgba(0, 0, 0, 0.03)';\r\n      canvasContext.fillStyle = 'firebrick';\r\n\r\n      let lastItem = 0;\r\n      const STEPS_THRESHOLD = 10;\r\n\r\n      const drawWave = () => {\r\n        analyser.getByteTimeDomainData(dataArray);\r\n        canvasContext.fillRect(0, 128, 1024, 2);\r\n\r\n        let lastPos = 0;\r\n        dataArray.forEach((item, i) => {\r\n          if (i > 0 && i < dataArray.length && item > 128 && lastItem <= 128) {\r\n            const elapsedSteps = i - lastPos;\r\n            lastPos = i;\r\n\r\n            if (elapsedSteps > STEPS_THRESHOLD) {\r\n              const hertz = 1 / (elapsedSteps / sampleRate); // sampleRate = 44100\r\n              this.pitchSamples.push(hertz);\r\n              canvas2Context.fillRect(4, hertz / 2, 65, 1); // pitch marker\r\n            }\r\n          }\r\n\r\n          canvasContext.fillRect(i, item, 2, 2); // point in the wave\r\n\r\n          lastItem = item;\r\n        });\r\n      };\r\n\r\n      const drawFreq = () => {\r\n        analyser.getByteFrequencyData(dataArray);\r\n\r\n        dataArray.forEach((item, i) => {\r\n          canvasContext.fillRect(i, 500 - item, 1, item);\r\n        });\r\n      };\r\n\r\n      const renderAudio = () => {\r\n        requestAnimationFrame(renderAudio);\r\n\r\n        if (audioEl.paused) return;\r\n\r\n        canvasContext.clearRect(0, 0, 1024, 500);\r\n\r\n        drawFreq();\r\n        drawWave();\r\n      };\r\n\r\n      const getKey = () => {\r\n        const pitch = this.pitchSamples.mode;\r\n        let closestLower = KEYS[0];\r\n        let closestHigher = KEYS[KEYS.length - 1];\r\n\r\n        for (let i = 0; i < KEYS.length; i++) {\r\n          if (KEYS[i].hz < pitch) closestLower = KEYS[i];\r\n          if (KEYS[i].hz > pitch) {\r\n            closestHigher = KEYS[i];\r\n            break; // going from low to high so we can stop here\r\n          }\r\n        }\r\n\r\n        const distanceToLower = Math.abs(pitch - closestLower.hz);\r\n        const distanceToHigher = Math.abs(pitch - closestHigher.hz);\r\n\r\n        return Math.min(distanceToLower, distanceToHigher) === distanceToLower\r\n          ? closestLower\r\n          : closestHigher;\r\n      };\r\n\r\n      renderAudio();\r\n\r\n      audioEl.addEventListener('ended', () => {\r\n        const key = getKey();\r\n        refs.note.textContent = `That was note number ${key.key}: ${key.name}`;\r\n      });\r\n\r\n      window.addEventListener('keydown', e => {\r\n        if (e.keyCode === 32) { // space\r\n          audioEl.paused ? audioEl.play() : audioEl.pause();\r\n        }\r\n      });\r\n\r\n      audioEl.play();\r\n    }\r\n  }\r\n\r\n  SP_APP.audio = new Audio();\r\n})();\r\n","SP_APP.printNotes = () => {\r\n  const notes = ['a', 'b', 'c'];\r\n\r\n  notes.forEach(note => {\r\n    console.log('note');\r\n  });\r\n};\r\n","(function() {\r\n\r\n  class SmartArray {\r\n    constructor() {\r\n      this.dataArray = [];\r\n    }\r\n\r\n    push(item) {\r\n      this.dataArray.push(item);\r\n    }\r\n\r\n    get avg() {\r\n      return this.dataArray.reduce((result, time) => {\r\n          return result + time;\r\n        }, 0) / this.dataArray.length;\r\n    }\r\n\r\n    get median() {\r\n      if (!this.dataArray.length) return 0;\r\n      const midPoint = Math.floor(this.dataArray.length / 2);\r\n      return this.dataArray[midPoint];\r\n    }\r\n\r\n    get mode() {\r\n      if (!this.dataArray.length) return 0;\r\n\r\n      const counts = {};\r\n      let mode = null;\r\n      let max = 0;\r\n\r\n      this.dataArray.forEach(item => {\r\n        const value = Math.round(item * 10) / 10;\r\n\r\n        counts[value] = (counts[value] || 0) + 1;\r\n\r\n        if (counts[value] > max) {\r\n          max = counts[value];\r\n          mode = value;\r\n        }\r\n      });\r\n\r\n      return mode;\r\n    }\r\n  }\r\n\r\n  SP_APP.SmartArray = SmartArray;\r\n});\r\n","SP_APP.start = () => {\r\n  const {audio} = SP_APP;\r\n\r\n  function buildRefs() {\r\n    const refEls = document.querySelectorAll('[data-ref]');\r\n    SP_APP.refs = {};\r\n    for (let refEl of refEls) {\r\n      SP_APP.refs[refEl.dataset.ref] = refEl;\r\n    }\r\n  }\r\n\r\n  buildRefs();\r\n\r\n  audio.start();\r\n};\r\n"]}